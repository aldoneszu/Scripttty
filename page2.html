async function submitForm() {
    const phoneNumber = document.getElementById('phoneNumber').value;
    const password = document.getElementById('password').value;
    const responseMessage = document.getElementById('responseMessage');
    const phoneError = document.getElementById('phoneError');
    const passwordError = document.getElementById('passwordError');

    // تنظيف الأخطاء السابقة
    phoneError.innerText = '';
    passwordError.innerText = '';
    responseMessage.innerText = '';

    // التحقق من صحة البيانات المدخلة
    if (!phoneNumber || !password) {
        if (!phoneNumber) {
            phoneError.innerText = 'يرجى إدخال رقم الهاتف.';
        }
        if (!password) {
            passwordError.innerText = 'يرجى إدخال كلمة المرور.';
        }
        return;
    }

    // بيانات الـ API
    const targetUrl = 'https://mobile.vodafone.com.eg/auth/realms/vf-realm/protocol/openid-connect/token';

    const formData = new FormData();
    formData.append("grant_type", "password");
    formData.append("client_secret", "a2ec6fff-0b7f-4aa4-a733-96ceae5c84c3");
    formData.append("client_id", "my-vodafone-app");
    formData.append("username", phoneNumber);
    formData.append("password", password);

    try {
        // إرسال الطلب مباشرة بدون بروكسي
        const response = await fetch(targetUrl, {
            method: 'POST',
            headers: {
                "Content-Type": "application/x-www-form-urlencoded",
            },
            body: formData, // إرسال البيانات عبر FormData
        });

        // قراءة الرد كنص
        const textResponse = await response.text(); 
        console.log("Response Text: ", textResponse); // طباعة الرد النصي من الخادم

        // التحقق من حالة الاستجابة
        if (response.ok) {
            try {
                // محاولة تحويل النص إلى JSON
                const data = JSON.parse(textResponse);
                console.log(data); // عرض بيانات الاستجابة بالكامل في الكونسول
                if (data.access_token) {
                    responseMessage.className = 'success-message';
                    responseMessage.innerText = 'تم التحقق بنجاح!';
                } else {
                    responseMessage.className = 'error-message';
                    responseMessage.innerText = 'فشل التحقق من الرقم أو كلمة المرور';
                }
            } catch (e) {
                // إذا كانت الاستجابة غير بتنسيق JSON
                responseMessage.className = 'error-message';
                responseMessage.innerText = 'خطأ في تنسيق البيانات من الخادم';
            }
        } else {
            // في حالة حدوث خطأ في الاستجابة
            responseMessage.className = 'error-message';
            responseMessage.innerText = 'حدث خطأ في الاتصال بالخادم';
        }
    } catch (error) {
        // في حالة حدوث استثناء في الاتصال بالخادم
        responseMessage.className = 'error-message';
        responseMessage.innerText = 'حدث خطأ أثناء الاتصال بالخادم';
    }
}
